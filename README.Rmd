---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

[![Travis-CI Build Status](https://travis-ci.org/sebdalgarno/HGfetch.svg?branch=master)](https://travis-ci.org/sebdalgarno/HGfetch)

# HGfetch

Calculate two proxies for wave exposure at a set of sites: summed fetch and wind-altered fetch.

## Introduction

Calculate two proxies for wave exposure at a set of sites: summed fetch and wind-altered fetch. 
Fetch data are provided for Laskeek Bay, BC, and wind data are provided for Cumshewa weather station from 2012-2016.
Two additional data sets are available for download from http://github.com/sebdalgarno : (1) Fetch distances at 5 degree intervals from points spaced every 10m along the Haida Gwaii coastline; (2) wind data from all weather stations (n=7) in Haida Gwaii with availalable hourly wind direction recordings from 2012-2016. 
Summed fetch is calculated by finding the nearest point within the fetch data set. 
User may set maximum fetch distance. 
Wind-altered fetch is calculated by weighting fetch lines according to proportion of time that weind blew in that direction. User may define years, months and which stations are included for determination of weighting factors. 
Each site is weighted according to the nearest weather station.

## Utilisation

```{r}
library(HGfetch)
library(magrittr)

data <- data.frame(Long = -131, Lat = 53)
data %<>% convert_proj()

cumshewa_wind %<>% convert_proj()
laskeek_fetch %<>% convert_proj(data.CRS="+init=epsg:3005", new.CRS="+init=epsg:3005")

data %<>% nearest_point(data2 = laskeek_fetch, data2ID = 'PointID')

data %<>% sum_fetch(fetch.data = laskeek_fetch, max.distance = 200000)

weights <- wind_weights(wind.data = cumshewa_wind, years = 2016, months = 4:8)

data %<>% wind_fetch(fetch.data = sp_fetch, weights.data = weights, max.distance = 200000)
```

## Installation

To install from GitHub
```
# install.packages("devtools")
devtools::install_github("sebdalgarno/HGfetch")
```

## Contribution

Included data sets: fetch distances (laskeek_fetch) were calculated using ShoreZone 1:50,000 vector coastline data and software (Vector_fetch) developed by Mika Murtojarvi; wind data (cumshewa_wind) were taken from http://http://climate.weather.gc.ca/historical_data/search_historic_data_e.html.

Please report any [issues](https://github.com/sebdalgarno/HGfetch/issues).

[Pull requests](https://github.com/sebdalgarno/HGfetch/pulls) are always welcome.

